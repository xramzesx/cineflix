## Cineflix - basic ticket reservation system
Basic cinema ticket reservation system with simple cms.
I coded it in 2020 for Server Applications course in Upper-Secondary Schools of Communications.
## Additional information about project
### Run
- To run this project you need Apache + MySQL Server
- To build this project type in `cineflix` directory `npm run build`
### Used technology
- HTML, CSS, JavaScript
- React
- PHP
## Some things that I learned:
- React Router + React Switch
- practical PHP


## Original README (in Polish 叼):

### Og贸lne informacje
Projekt zosta wykonany przy u偶yciu PHP wraz z React'em, Sass'em oraz api Youtube. Ka偶de pobranie informacji nastpowao za porednictwem api napisanego w phpie. Po za rezerwacj miejsc na nr telefonu i imi dodaem jeszcze mechanizm logowania i rejestracji oparty o php sessions. Ponadto ka偶de haso jest hashowane, a cie偶ki do plik贸w php nie wymagaj pisania rozszerzenia ".php".

> Aby  **doda seans** trzeba najpierw zalogowa si na konto administratora w zakadce "**Konto**". Nastpnie w panelu po lewej stronie klikn "**Dodaj seans**".

Formularz do dodawania seans贸w oraz film贸w jest walidowany po obu stronach (serwer i klient) tak, aby seanse nie mogy na siebie nachodzi. Jeli zostan wykryte jakie kolizje, formularz na pewno o tym poinformuje.

> Aby  **doda film** podobnie jak wczeniej trzeba si zalogowa i klikn w "**Dodaj film**".  **Uwaga!** Aby doda nowy film potrzebny jest  **pionowy plakat** png lub jpg oraz  **YoutubeID** (na samym dole informacja czym jest)

> Aby  **zarezerwowa bilety** nale偶y najpierw wybra film dostpny na stronie g贸wnej ( "/" lub /movies ). Nastpnie na stronie powiconej konkretnemu filmowi klikamy "**Zarezerwuj**" lub zje偶d偶amy na d贸 strony i wybieramy seans, kt贸ry nas interesuje (jeli istnieje). Rezerwacja podlega tak偶e walidacji w czasie rzeczywistym po stronie klienta, a tak偶e w momencie wysania formularza jest weryfikowane, czy miejsca nie stay sie w midzyczasie zajte.

  

Mo偶na zarezerwowa bilety i na imi z numerem telefonu, i na adres email czyli na utworzone konto w zakadce /account. Rezerwacja przypisywana jest do jednego poczenia (tj. imi - nr tel lub login - haso). Mo偶na j sprawdzi w zakadce "**Sprawd藕 rezerwacj**" lub pod linkiem

  

### Dane do logowania 

> Domylne dane logowania do administratora strony (dla takich danych w chrome mo偶e wyskakiwa alert o mao bezpiecznych danych):
**login**:
admin
**haso**
admin

> Alternatywa (tu ju偶 chrome powinien by spokojniejszy):
**login:**
nauczyciel
**haso:**
zaq1@WSX

> Domylne dane logowania do przykadowego u偶ytkownika strony:
**login**:
user
**haso**
user

  

### Struktura projektu 

Pliki projektu podzielone s na 3 g贸wne foldery:

**api** - cz backendowa

**cineflix** - cz frontendowa

**dist** - folder, do kt贸rego po skompilowaniu czci frontendowej wrzucam wszystkie niezbdne pliki

  

Cae api znajduje si wewntrz folderu  **/api**

Skr贸towy opis podfolder贸w  **/api**  :

**/account**  - cz odpowiedzialna za logowanie i uwierzytelnianie

**/add** - cz przeznaczona tylko dla admina, su偶y dodawaniu nowych element贸w

**/posters** - folder przechowujcy wszelkie plakaty (podobno taki folder dziaa szybciej ni偶 przechowywanie grafik bezporednio w bazie)

**/reserve** - cz odpowiedzialna za przechwytywanie rezerwacji oraz ich sprawdzanie

**/trivial** - zapytania trywialne, nale偶 do nich dane do strony g贸wnej oraz strony ka偶dego filmu.

**/utilities** - zapytania wykorzystywane do waciwego dziaania m.in. formularzy dodawajcych cokolwiek (seans, film, rezerwacj)

Ponadto 2 pliki le偶 bezporednio:
**props.php** - wszystkie wa偶ne zmienne projektu
**voids.php** - wszystkie funkcj projektu.

  

Struktura bazy wraz z relacjami :

![image.png](https://mail.google.com/mail/u/1?ui=2&ik=1c1cf6264a&attid=0.1&permmsgid=msg-a:r-7216269704673739797&th=175f2a3d78cdb2ea&view=fimg&fur=ip&sz=s0-l75-ft&attbid=ANGjdJ9Rk5zslZRj6gWjaXzV8_V4za7kTiIyk4gKyITfqYMMld1Ra1XMpcNohnzLUkdwk6GxOa2gBYgxTKGSeLG_z_AKL5zIGLRBlv7HLaTJh-Mgz1IqirdnpaX_70o&disp=emb&realattid=ii_khtssi3z0)  

  

### Konfiguracja lokalnie 

Zmienne niezbdne do poczenia si z baz danych s przechowywane w pliku  **/api/props.php**.

Aby uruchomi u siebie, nale偶y przekopiowa folder  **jkedra** bezporednio do katalogu  **htdocs** tak, aby url strony g贸wnej wyglda mniej wicej tak :  [http://localhost](http://localhost/jkedra)**/jkedra/**

Wa偶ne jest, by bya  **dokadnie taka sama cie偶ka jak powy偶ej**, ze wzgldu na routing React'a i jego wym贸g konfiguracji. Nazwa domeny oraz port nie jest wa偶na, lecz cie偶ka (path) musi by dokadnie ten sam. W innym wypadku strona nie bdzie dziaa.

Trzeba tak偶e oczywicie zaimportowa baz danych. Na mojej lokalnej maszynie nazywaa si ona "**cinema**". Nazw bazy mo偶na zmieni w wczeniej wspomnianym pliku  **props.php**.  

Notatki:
* aby odpali ca wersj dewelopersk, nale偶y najpierw w folderze  cineflix  u偶y polecenia  **npm install**, a nastpnie skonfigurowa adres proxy w package.json na adres xamppa i uruchomi "**npm start**". Troch mo偶e zaj sama konfiguracja rodowiska.

### Informacje dodatkowe 

- Czasami strona mo偶e si dugo adowa na podanym na samym pocztku linku, ze wzgldu na darmowy hosting.

- zagnie偶dzone linki (np. /movie/id_filmu) mog nie dziaa po bezporednim wpisaniu url przez niezbyt dobr wsp贸prac routingu Reactowego z apache. Lecz poruszanie si po widocznym interfejsie powinno dziaa bez zarzutu.

-  **Youtube ID**  - jest to identyfikator filmu na youtube, majcy max 11 znak贸w. Znajduje si on w linku do ka偶dego filmu na youtube, np.:  
	- **z parametru v** (kopiowanie bezporednio linku): https://www.youtube.com/watch?v=**pmc3EIn7bU4**&ab_channel=KubaKlawiter  

	- **z bezporedniej cie偶ki** (udostpnianie filmu yt):
		https://youtu.be/**pmc3EIn7bU4**  

- dane i plakaty pobraem z strony cinema-city